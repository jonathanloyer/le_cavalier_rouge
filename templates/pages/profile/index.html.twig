{% extends 'pages/layout.html.twig' %}

{% block title %}Profil de {{ app.user.pseudo }}{% endblock %}

{% block body %}
<div class="profile-container max-w-4xl mx-auto mt-10 p-6 bg-white shadow-lg rounded-lg">
    <!-- Avatar avec l'icône pour modifier le profil -->
    <div class="flex items-center justify-center relative">
        <img
            src="{{ user.avatar ? asset('uploads/avatar/' ~ user.avatar) : asset('images/default-avatar.png') }}" 
            alt="Avatar" 
            class="avatar-img w-32 h-32 rounded-full border-4 border-gray-300">

        <!-- Icône pour modifier -->
        <a href="{{ path('app_profile_update') }}" 
            class="absolute bottom-0 right-0 bg-blue-500 p-2 rounded-full text-white hover:bg-blue-600 focus:outline-none">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 3l9 9-9 9M21 12H7"></path>
            </svg>
        </a>
    </div>

    <!-- Informations utilisateur -->
    <div class="text-center mt-6">
        <h2 class="text-3xl font-semibold text-gray-800">{{ user.pseudo }}</h2>
        <span class="text-gray-600 mt-2">{{ user.lastName ?: '' }}</span>
        <span class="text-gray-600 mt-2">{{ user.firstName ?: '' }}</span>
        <p class="text-gray-600 mt-2">
            <strong>Email:</strong>
            {{ user.email }}
        </p>
    </div>

    <!-- Boutons Feuilles de match et Compétitions -->
    <div class="text-center mt-6">
        {% if is_granted('ROLE_CAPITAINE') or is_granted('ROLE_ADMIN') %}
            <div class="flex justify-center gap-4">
                <!-- Bouton Feuilles de match -->
                <a href="{{ path('app_match_sheets') }}" 
                    class="bg-purple-500 text-white rounded-lg shadow p-4 hover:bg-purple-600 inline-block">
                    <p class="text-xl font-bold">Feuilles de match</p>
                </a>

                <!-- Bouton Compétitions -->
                <a href="{{ path('user_competitions_list') }}" 
                    class="bg-blue-500 text-white rounded-lg shadow p-4 hover:bg-blue-600 inline-block">
                    <p class="text-xl font-bold">Compétitions</p>
                </a>
            </div>
        {% else %}
            <!-- Bouton Compétitions uniquement pour les utilisateurs sans ROLE_CAPITAINE -->
            <a href="{{ path('user_competitions_list') }}" 
                class="bg-blue-500 text-white rounded-lg shadow p-4 hover:bg-blue-600 inline-block">
                <p class="text-xl font-bold">Compétitions</p>
            </a>
        {% endif %}
    </div>
</div>
{% endblock %}
