{% extends 'pages/layout.html.twig' %}

{% block title %}Feuille de Match - {{ feuilleMatch.id }}{% endblock %}

{% block body %}
<div class="max-w-screen-lg mx-auto p-4 bg-gray-100">
    <!-- Section des informations générales -->
    <div class="bg-white p-4 rounded shadow mb-4 text-sm">
        <label class="block mt-4 mb-2 text-gray-700">Interclub :</label>
        <input type="text" id="interclub" readonly value="{{ feuilleMatch.interclub }}" class="w-full border border-gray-300 rounded px-2 py-1 bg-gray-100">

        <label class="block mt-4 mb-2 text-gray-700">Division :</label>
        <input type="text" id="division" readonly value="{{ feuilleMatch.type }}" class="w-full border border-gray-300 rounded px-2 py-1 bg-gray-100">

        <label class="block mt-4 mb-2 text-gray-700">Groupe :</label>
        <input type="text" id="groupe" readonly value="{{ feuilleMatch.groupe }}" class="w-full border border-gray-300 rounded px-2 py-1 bg-gray-100">

        <label class="block mt-4 mb-2 text-gray-700">Date du Match :</label>
        <input type="text" id="dateMatch" readonly value="{{ feuilleMatch.dateMatch|date('d/m/Y') }}" class="w-full border border-gray-300 rounded px-2 py-1 bg-gray-100">
    </div>

    <!-- Titre -->
    <div class="bg-orange-500 text-white text-center font-bold py-2 mb-2 text-sm">
        Feuille de Match - Groupe : <span>{{ feuilleMatch.groupe }}</span>
    </div>

    <!-- Tableau des joueurs -->
    <div class="overflow-x-auto">
        <table class="table-auto w-full border-collapse text-sm">
            <thead>
                <tr class="bg-gray-200 text-gray-700">
                    <th class="border border-gray-300 p-1 text-center">#</th>
                    <th class="border border-gray-300 p-1 text-center">Club A</th>
                    <th class="border border-gray-300 p-1 text-center">Code FFE / Joueur</th>
                    <th class="border border-gray-300 p-1 text-center">Résultat</th>
                    <th class="border border-gray-300 p-1 text-center">Code FFE / Joueur</th>
                    <th class="border border-gray-300 p-1 text-center">Club B</th>
                </tr>
            </thead>
            <tbody>
                {% for i in 0..4 %}
                <tr class="text-center">
                    <td class="border border-gray-300 p-1">{{ i + 1 }}</td>
                    <td class="border border-gray-300 p-1">
                        {{ feuilleMatch.clubA ? feuilleMatch.clubA.name : 'Non défini' }}
                    </td>
                    <td class="border border-gray-300 p-1">
                        {% if joueursSelectionnesA[i] is defined %}
                            {{ joueursSelectionnesA[i].codeFFE }} - {{ joueursSelectionnesA[i].lastName }} {{ joueursSelectionnesA[i].firstName }}
                        {% else %}
                            Non défini
                        {% endif %}
                    </td>
                    <td class="border border-gray-300 p-1">
                        {{ resultats[i]|default('Non défini') }}
                    </td>
                    <td class="border border-gray-300 p-1">
                        {% if joueursSelectionnesB[i] is defined %}
                            {{ joueursSelectionnesB[i].codeFFE }} - {{ joueursSelectionnesB[i].lastName }} {{ joueursSelectionnesB[i].firstName }}
                        {% else %}
                            Non défini
                        {% endif %}
                    </td>
                    <td class="border border-gray-300 p-1">
                        {{ feuilleMatch.clubB ? feuilleMatch.clubB.name : 'Non défini' }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Capitaines et arbitre -->
    <div class="overflow-x-auto mt-4">
        <table class="table-auto w-full border-collapse text-sm">
            <thead>
                <tr class="bg-gray-200 text-gray-700">
                    <th class="border border-gray-300 p-1 text-center">Rôle</th>
                    <th class="border border-gray-300 p-1 text-center">Code FFE</th>
                    <th class="border border-gray-300 p-1 text-center">Nom complet</th>
                </tr>
            </thead>
            <tbody>
                <tr class="text-center">
                    <td class="border border-gray-300 p-1">Capitaine équipe A</td>
                    <td class="border border-gray-300 p-1">{{ capitaineA ? capitaineA.codeFFE : 'Non défini' }}</td>
                    <td class="border border-gray-300 p-1">{{ capitaineA ? capitaineA.lastName ~ ' ' ~ capitaineA.firstName : 'Non défini' }}</td>
                </tr>
                <tr class="text-center">
                    <td class="border border-gray-300 p-1">Capitaine équipe B</td>
                    <td class="border border-gray-300 p-1">{{ capitaineB ? capitaineB.codeFFE : 'Non défini' }}</td>
                    <td class="border border-gray-300 p-1">{{ capitaineB ? capitaineB.lastName ~ ' ' ~ capitaineB.firstName : 'Non défini' }}</td>
                </tr>
                <tr class="text-center">
                    <td class="border border-gray-300 p-1">Arbitre</td>
                    <td class="border border-gray-300 p-1">{{ arbitre ? arbitre.codeFFE : 'Non défini' }}</td>
                    <td class="border border-gray-300 p-1">{{ arbitre ? arbitre.lastName ~ ' ' ~ arbitre.firstName : 'Non défini' }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Boutons -->
    <div class="flex justify-between mt-4 text-sm">
        <a href="{{ path('app_match_sheets_list') }}" class="bg-gray-800 text-white px-4 py-2 rounded hover:bg-gray-700 transition">
            Retour à la liste
        </a>
        <a href="{{ path('app_match_sheets_download_pdf', {'id': feuilleMatch.id}) }}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-500 transition">
            Télécharger en PDF
        </a>
    </div>
</div>
{% endblock %}
