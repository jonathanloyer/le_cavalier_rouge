{# Barre de navigation #}
<nav class="navbar shared-navbar-footer text-white p-4 flex items-center justify-between fixed top-0 w-full z-50" style="height: 50px !important;">
    <!-- Logo -->
    <div class="flex items-center space-x-4">
        <img src="/img/logo.png" alt="Logo de l'association Le Cavalier Rouge" class="h-8 w-auto">
        <a href="/" class="text-white text-xl font-bold  sm:block">Le Cavalier Rouge</a>
    </div>

    <!-- Menu Burger -->
    <button id="navbar-menu-button" aria-label="Ouvrir le menu" aria-expanded="false" class="md:hidden focus:outline-none">
        <svg width="24" height="24" viewBox="0 0 24 24" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="4" x2="20" y1="12" y2="12"/>
            <line x1="4" x2="20" y1="6" y2="6"/>
            <line x1="4" x2="20" y1="18" y2="18"/>
        </svg>
    </button>

    <!-- Menu -->
    <ul id="navbar-menu" class="hidden md:flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-8">
        <li><a href="/" class="text-lg hover:text-indigo-500 transition-colors duration-200">Accueil</a></li>
           {% if app.user %}
            <li><a href="{{ path('app_profile') }}" class="text-lg hover:text-indigo-500 transition-colors duration-200">Profile</a></li>
            {% if is_granted('ROLE_ADMIN') %}
                <li><a href="{{ path('app_admin') }}" class="text-lg hover:text-indigo-500 transition-colors duration-200">Tableau de bord</a></li>
            {% endif %}
            <li><a href="{{ path('app_logout') }}" class="text-lg hover:text-indigo-500 transition-colors duration-200">Se d√©connecter</a></li>
        {% else %}
            <li><a href="{{ path('app_login') }}" class="text-lg hover:text-indigo-500 transition-colors duration-200">Connexion</a></li>
            <li><a href="/inscription" class="text-lg hover:text-indigo-500 transition-colors duration-200">Inscription</a></li>
        {% endif %}
        
        {% if not is_granted('ROLE_ADMIN') %}
            <li><a href="{{ path('public_contact_form') }}" class="text-lg hover:text-indigo-500 transition-colors duration-200">Contactez-nous</a></li>
        {% endif %}
    </ul>
</nav>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const menuButton = document.querySelector('#navbar-menu-button');
    const menu = document.querySelector('#navbar-menu');

    if (!menuButton || !menu) {
        console.error('Menu button or menu not found');
        return;
    }

    menuButton.addEventListener('click', () => {
        const isExpanded = menuButton.getAttribute('aria-expanded') === 'true';
        menuButton.setAttribute('aria-expanded', !isExpanded);
        menu.classList.toggle('open');
    });

    document.addEventListener('click', (event) => {
        if (!menu.contains(event.target) && !menuButton.contains(event.target)) {
            menuButton.setAttribute('aria-expanded', false);
            menu.classList.remove('open');
        }
    });
});
</script>
